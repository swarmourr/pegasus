x-pegasus:
  apiLang: python
  createdBy: poseidon
  createdOn: 02-23-24T21:34:03Z
pegasus: 5.0.4
name: federated-learning-example-tracked-dated-fl1
metadata:
  wf_track: 'True'
siteCatalog:
  sites:
  - name: local
    directories:
    - type: sharedScratch
      path: /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/scratch
      sharedFileSystem: false
      fileServers:
      - url: file:///home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/scratch
        operation: all
    - type: localStorage
      path: /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/output
      sharedFileSystem: false
      fileServers:
      - url: file:///home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/output
        operation: all
  - name: condorpool
    directories:
    - type: sharedScratch
      path: /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/scratch
      sharedFileSystem: false
      fileServers:
      - url: scp://poseidon@federated-learning-submit/home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/scratch
        operation: all
    profiles:
      condor:
        universe: vanilla
        request_memory: 2048
      pegasus:
        style: condor
        memory: 2048
        data.configuration: nonsharedfs
        SSH_PRIVATE_KEY: /home/poseidon/.ssh/cluster_key
        auxillary.local: 'True'
replicaCatalog:
  replicas:
  - lfn: train-images-idx3-ubyte
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/mnist/train-images-idx3-ubyte
  - lfn: train-labels-idx1-ubyte
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/mnist/train-labels-idx1-ubyte
  - lfn: t10k-images-idx3-ubyte
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/mnist/t10k-images-idx3-ubyte
  - lfn: t10k-labels-idx1-ubyte
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/mnist/t10k-labels-idx1-ubyte
  - lfn: cred
    pfns:
    - site: local
      pfn: /home/poseidon/.pegasus/dvcproject-credentials.json
  - lfn: metadata
    pfns:
    - site: local
      pfn: /home/poseidon/.pegasus/metadata.yaml
  - lfn: wf
    pfns:
    - site: local
      pfn: /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/workflow.yml
  - lfn: init_model
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/init_model.py
  - lfn: local_model
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/local_model.py
  - lfn: global_model
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/global_model.py
  - lfn: evaluate_model
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/evaluate_model.py
  - lfn: perf_model
    pfns:
    - site: local
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/perf_model.py
transformationCatalog:
  transformations:
  - name: init_model
    sites:
    - name: condorpool
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/init_model.py
      type: stageable
      container: federated_learning_container
    metadata:
      track_Trans: 'True'
  - name: local_model
    sites:
    - name: condorpool
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/local_model.py
      type: stageable
      container: federated_learning_container
    metadata:
      track_Trans: 'True'
  - name: global_model
    sites:
    - name: condorpool
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/global_model.py
      type: stageable
      container: federated_learning_container
    metadata:
      track_Trans: 'True'
  - name: evaluate_model
    sites:
    - name: condorpool
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/evaluate_model.py
      type: stageable
      container: federated_learning_container
    metadata:
      track_Trans: 'True'
  - name: perf_model
    sites:
    - name: condorpool
      pfn: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/perf_model.py
      type: stageable
      container: federated_learning_container
    metadata:
      track_Trans: 'True'
  - name: data_tracker
    sites:
    - name: condorpool
      pfn: /home/poseidon-data/workflows/FL-workflow/FlVenv/lib/python3.8/site-packages/Pegasus/api/Versionning/versiondata.py
      type: stageable
      container: federated_learning_container
  - name: combiner
    sites:
    - name: condorpool
      pfn: /home/poseidon-data/workflows/FL-workflow/FlVenv/lib/python3.8/site-packages/Pegasus/api/Versionning/pegasus_yaml_combiner.py
      type: stageable
      container: federated_learning_container
  - name: version_transformations
    sites:
    - name: condorpool
      pfn: /home/poseidon-data/workflows/FL-workflow/FlVenv/lib/python3.8/site-packages/Pegasus/api/Versionning/transformationVersioning.py
      type: stageable
      container: federated_learning_container
  - name: cp
    sites:
    - name: local
      pfn: /bin/cp
      type: installed
  containers:
  - name: federated_learning_container
    type: singularity
    image: scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/containers/fl.sif
    image.site: local
    profiles:
      pegasus:
        container.arguments: '--env ENABLE_MLFLOW=True --env MLFLOW_EXPERIMENT_NAME=federated-learning-example-tracked-dated-fl1
          --env MLFLOW_RUN=$PEGASUS_DAG_JOB_ID --env MLFLOW_TRACKING_URI=https://dagshub.com/swarmourr/FL-WF.mlflow
          --env MLFLOW_TRACKING_USERNAME=swarmourr --env MLFLOW_TRACKING_PASSWORD=8e68cdbad7d3e90f137cf248e4d3d29c2c790622
          --env MLFLOW_CONFIG=auto --env FILE_TYPE=None '
jobs:
- type: job
  name: local_model
  id: client_3_round_0
  nodeLabel: local_model_client_3_round_0
  arguments:
  - -s 18000 -e 23999 -r 0 -m global_model_round_init.h5
  uses:
  - lfn: global_model_round_init.h5
    metadata:
      output_track: 'True'
    type: input
  - lfn: local_model_18000_23999_round_0.h5
    type: output
    stageOut: true
    registerReplica: false
  - lfn: train-labels-idx1-ubyte
    metadata:
      mlflow: auto
    type: input
  - lfn: train-images-idx3-ubyte
    metadata:
      mlflow: auto
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: 333c907364bd4af9847498dafaf3fcf0
    pegasus:
      label: client_3_round_0
- type: job
  name: local_model
  id: client_2_round_0
  nodeLabel: local_model_client_2_round_0
  arguments:
  - -s 12000 -e 17999 -r 0 -m global_model_round_init.h5
  uses:
  - lfn: global_model_round_init.h5
    metadata:
      output_track: 'True'
    type: input
  - lfn: local_model_12000_17999_round_0.h5
    type: output
    stageOut: true
    registerReplica: false
  - lfn: train-labels-idx1-ubyte
    metadata:
      mlflow: auto
    type: input
  - lfn: train-images-idx3-ubyte
    metadata:
      mlflow: auto
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: a570f2c350ae4a73929aec876e81d6c3
    pegasus:
      label: client_2_round_0
- type: job
  name: local_model
  id: client_4_round_0
  nodeLabel: local_model_client_4_round_0
  arguments:
  - -s 24000 -e 29999 -r 0 -m global_model_round_init.h5
  uses:
  - lfn: local_model_24000_29999_round_0.h5
    type: output
    stageOut: true
    registerReplica: false
  - lfn: global_model_round_init.h5
    metadata:
      output_track: 'True'
    type: input
  - lfn: train-labels-idx1-ubyte
    metadata:
      mlflow: auto
    type: input
  - lfn: train-images-idx3-ubyte
    metadata:
      mlflow: auto
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: f16a28336cef4b51a2439905cfe0fe27
    pegasus:
      label: client_4_round_0
- type: job
  name: global_model
  id: global_model_round_0
  nodeLabel: global_model_round_0
  arguments:
  - -r 0 -f local_model_18000_23999_round_0.h5 local_model_12000_17999_round_0.h5
    local_model_24000_29999_round_0.h5
  uses:
  - lfn: local_model_24000_29999_round_0.h5
    type: input
  - lfn: local_model_18000_23999_round_0.h5
    type: input
  - lfn: global_model_round_0.h5
    type: output
    stageOut: true
    registerReplica: false
  - lfn: local_model_12000_17999_round_0.h5
    type: input
  profiles:
    pegasus:
      label: global_model_round_0
- type: job
  name: evaluate_model
  id: eval_client_9_0
  nodeLabel: evaluate_model_client_9_0
  arguments:
  - -s 9000 -e 9999 -c 9 -m global_model_round_0.h5 -r 0
  uses:
  - lfn: global_model_round_0.h5
    type: input
  - lfn: t10k-labels-idx1-ubyte
    metadata:
      mlflow: auto
    type: input
  - lfn: t10k-images-idx3-ubyte
    metadata:
      mlflow: auto
    type: input
  - lfn: global_model_evaluation_9_0.csv
    type: output
    stageOut: true
    registerReplica: false
  profiles:
    env:
      MLFLOW_RUN_ID: 027a4719b974437393a53e04e6391116
    pegasus:
      label: eval_client_9_0
- type: job
  name: evaluate_model
  id: eval_client_5_0
  nodeLabel: evaluate_model_client_5_0
  arguments:
  - -s 5000 -e 5999 -c 5 -m global_model_round_0.h5 -r 0
  uses:
  - lfn: global_model_evaluation_5_0.csv
    type: output
    stageOut: true
    registerReplica: false
  - lfn: global_model_round_0.h5
    type: input
  - lfn: t10k-labels-idx1-ubyte
    metadata:
      mlflow: auto
    type: input
  - lfn: t10k-images-idx3-ubyte
    metadata:
      mlflow: auto
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: 31f6f65c670c409e93ae4e1e8038b615
    pegasus:
      label: eval_client_5_0
- type: job
  name: evaluate_model
  id: eval_client_6_0
  nodeLabel: evaluate_model_client_6_0
  arguments:
  - -s 6000 -e 6999 -c 6 -m global_model_round_0.h5 -r 0
  uses:
  - lfn: global_model_round_0.h5
    type: input
  - lfn: t10k-labels-idx1-ubyte
    metadata:
      mlflow: auto
    type: input
  - lfn: global_model_evaluation_6_0.csv
    type: output
    stageOut: true
    registerReplica: false
  - lfn: t10k-images-idx3-ubyte
    metadata:
      mlflow: auto
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: 6d5f3ea3f83d4a34818d7e3e6b5bdda4
    pegasus:
      label: eval_client_6_0
- type: job
  name: perf_model
  id: perf_model_0
  nodeLabel: perf_model_format_0
  arguments:
  - -f global_model_evaluation_9_0.csv global_model_evaluation_5_0.csv global_model_evaluation_6_0.csv  -n
    Model_performences_0.csv
  uses:
  - lfn: global_model_evaluation_5_0.csv
    type: input
  - lfn: Model_performences_0.csv
    type: output
    stageOut: true
    registerReplica: false
  - lfn: global_model_evaluation_6_0.csv
    type: input
  - lfn: global_model_evaluation_9_0.csv
    type: input
  profiles:
    pegasus:
      label: perf_model_0
- type: job
  name: data_tracker
  id: tracker_data_job_client_3_round_0_input
  nodeLabel: tracker_data_job_client_3_round_0_input
  arguments:
  - -files train-labels-idx1-ubyte train-images-idx3-ubyte -data_dir pegasus-data
    -metadata_format yaml -o pegasus-data/metadata_client_3_round_0_input -file_type
    inputs -pfn scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/mnist/train-images-idx3-ubyte
    scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/mnist/train-labels-idx1-ubyte
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: train-images-idx3-ubyte
    type: input
  - lfn: pegasus-data/metadata_client_3_round_0_input.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: cred
    type: input
  - lfn: train-labels-idx1-ubyte
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: 333c907364bd4af9847498dafaf3fcf0
    pegasus:
      label: client_3_round_0
- type: job
  name: init_model
  id: init_model
  nodeLabel: init_model
  arguments:
  - -n global_model_round_init.h5
  uses:
  - lfn: global_model_round_init.h5
    type: output
    stageOut: true
    registerReplica: false
  profiles:
    pegasus:
      label: init_model
- type: job
  name: data_tracker
  id: tracker_data_job_eval_client_9_0_input
  nodeLabel: tracker_data_job_eval_client_9_0_input
  arguments:
  - -files t10k-images-idx3-ubyte t10k-labels-idx1-ubyte -data_dir pegasus-data -metadata_format
    yaml -o pegasus-data/metadata_eval_client_9_0_input -file_type inputs -pfn scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/mnist/t10k-labels-idx1-ubyte
    scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/mnist/t10k-images-idx3-ubyte
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: t10k-labels-idx1-ubyte
    type: input
  - lfn: cred
    type: input
  - lfn: pegasus-data/metadata_eval_client_9_0_input.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: t10k-images-idx3-ubyte
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: 027a4719b974437393a53e04e6391116
    pegasus:
      label: eval_client_9_0
- type: job
  name: data_tracker
  id: tracker_data_job_init_model_output
  nodeLabel: tracker_data_job_init_model_output
  arguments:
  - -files global_model_round_init.h5 -data_dir pegasus-data -metadata_format yaml
    -o pegasus-data/metadata_init_model_output -file_type outputs -pfn /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/global_model_round_init.h5
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: global_model_round_init.h5
    type: input
  - lfn: pegasus-data/metadata_init_model_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: cred
    type: input
  profiles:
    pegasus:
      label: init_model
- type: job
  name: data_tracker
  id: tracker_data_job_client_3_round_0_output
  nodeLabel: tracker_data_job_client_3_round_0_output
  arguments:
  - -files local_model_18000_23999_round_0.h5 -data_dir pegasus-data -metadata_format
    yaml -o pegasus-data/metadata_client_3_round_0_output -file_type outputs -pfn
    /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/local_model_18000_23999_round_0.h5
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: local_model_18000_23999_round_0.h5
    type: input
  - lfn: pegasus-data/metadata_client_3_round_0_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: cred
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: 333c907364bd4af9847498dafaf3fcf0
    pegasus:
      label: client_3_round_0
- type: job
  name: data_tracker
  id: tracker_data_job_client_2_round_0_output
  nodeLabel: tracker_data_job_client_2_round_0_output
  arguments:
  - -files local_model_12000_17999_round_0.h5 -data_dir pegasus-data -metadata_format
    yaml -o pegasus-data/metadata_client_2_round_0_output -file_type outputs -pfn
    /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/local_model_12000_17999_round_0.h5
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: local_model_12000_17999_round_0.h5
    type: input
  - lfn: cred
    type: input
  - lfn: pegasus-data/metadata_client_2_round_0_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  profiles:
    env:
      MLFLOW_RUN_ID: a570f2c350ae4a73929aec876e81d6c3
    pegasus:
      label: client_2_round_0
- type: job
  name: data_tracker
  id: tracker_data_job_client_4_round_0_output
  nodeLabel: tracker_data_job_client_4_round_0_output
  arguments:
  - -files local_model_24000_29999_round_0.h5 -data_dir pegasus-data -metadata_format
    yaml -o pegasus-data/metadata_client_4_round_0_output -file_type outputs -pfn
    /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/local_model_24000_29999_round_0.h5
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: cred
    type: input
  - lfn: pegasus-data/metadata_client_4_round_0_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: local_model_24000_29999_round_0.h5
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: f16a28336cef4b51a2439905cfe0fe27
    pegasus:
      label: client_4_round_0
- type: job
  name: data_tracker
  id: tracker_data_job_global_model_round_0_output
  nodeLabel: tracker_data_job_global_model_round_0_output
  arguments:
  - -files global_model_round_0.h5 -data_dir pegasus-data -metadata_format yaml -o
    pegasus-data/metadata_global_model_round_0_output -file_type outputs -pfn /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/global_model_round_0.h5
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: global_model_round_0.h5
    type: input
  - lfn: cred
    type: input
  - lfn: pegasus-data/metadata_global_model_round_0_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  profiles:
    pegasus:
      label: global_model_round_0
- type: job
  name: data_tracker
  id: tracker_data_job_eval_client_9_0_output
  nodeLabel: tracker_data_job_eval_client_9_0_output
  arguments:
  - -files global_model_evaluation_9_0.csv -data_dir pegasus-data -metadata_format
    yaml -o pegasus-data/metadata_eval_client_9_0_output -file_type outputs -pfn /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/global_model_evaluation_9_0.csv
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: pegasus-data/metadata_eval_client_9_0_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: cred
    type: input
  - lfn: global_model_evaluation_9_0.csv
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: 027a4719b974437393a53e04e6391116
    pegasus:
      label: eval_client_9_0
- type: job
  name: data_tracker
  id: tracker_data_job_eval_client_5_0_output
  nodeLabel: tracker_data_job_eval_client_5_0_output
  arguments:
  - -files global_model_evaluation_5_0.csv -data_dir pegasus-data -metadata_format
    yaml -o pegasus-data/metadata_eval_client_5_0_output -file_type outputs -pfn /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/global_model_evaluation_5_0.csv
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: global_model_evaluation_5_0.csv
    type: input
  - lfn: cred
    type: input
  - lfn: pegasus-data/metadata_eval_client_5_0_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  profiles:
    env:
      MLFLOW_RUN_ID: 31f6f65c670c409e93ae4e1e8038b615
    pegasus:
      label: eval_client_5_0
- type: job
  name: data_tracker
  id: tracker_data_job_eval_client_6_0_output
  nodeLabel: tracker_data_job_eval_client_6_0_output
  arguments:
  - -files global_model_evaluation_6_0.csv -data_dir pegasus-data -metadata_format
    yaml -o pegasus-data/metadata_eval_client_6_0_output -file_type outputs -pfn /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/global_model_evaluation_6_0.csv
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: pegasus-data/metadata_eval_client_6_0_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: cred
    type: input
  - lfn: global_model_evaluation_6_0.csv
    type: input
  profiles:
    env:
      MLFLOW_RUN_ID: 6d5f3ea3f83d4a34818d7e3e6b5bdda4
    pegasus:
      label: eval_client_6_0
- type: job
  name: data_tracker
  id: tracker_data_job_perf_model_0_output
  nodeLabel: tracker_data_job_perf_model_0_output
  arguments:
  - -files Model_performences_0.csv -data_dir pegasus-data -metadata_format yaml -o
    pegasus-data/metadata_perf_model_0_output -file_type outputs -pfn /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/Model_performences_0.csv
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: pegasus-data/metadata_perf_model_0_output.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: cred
    type: input
  - lfn: Model_performences_0.csv
    type: input
  profiles:
    pegasus:
      label: perf_model_0
- type: job
  name: data_tracker
  id: tracker_wf_federated-learning-example-tracked-dated-fl1
  nodeLabel: tracker_wf_federated-learning-example-tracked-dated-fl1
  arguments:
  - -files wf -data_dir pegasus-data -metadata_format yaml -o pegasus-data/metadata_wf
    -file_type workflow -pfn /home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/workflow.yml
    -gdrive -remote_id 1KLUNrJNfCDI8Y5iXBmASUbtwqCpaHg3L -gcredentials cred
  uses:
  - lfn: pegasus-data/metadata_wf.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: wf
    type: input
  - lfn: cred
    type: input
  profiles:
    env:
      ENABLE_MLFLOW: 'False'
- type: job
  name: version_transformations
  id: transformation_versioning_job
  nodeLabel: transformation_versioning_job
  arguments:
  - -files init_model local_model global_model evaluate_model perf_model -names init_model
    local_model global_model evaluate_model perf_model -path scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/init_model.py
    scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/local_model.py
    scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/global_model.py
    scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/evaluate_model.py
    scp://poseidon@federated-learning-submit//home/poseidon/pegasus-integration/pegasus/packages/pegasus-api/test/workflow-example/bin/perf_model.py
    --use-git -token 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 -owner swarmourr -repo
    autopush -branch main
  uses:
  - lfn: local_model
    type: input
  - lfn: evaluate_model
    type: input
  - lfn: pegasus-data/metadata_transformations.yaml
    type: output
    stageOut: true
    registerReplica: true
  - lfn: global_model
    type: input
  - lfn: perf_model
    type: input
  - lfn: init_model
    type: input
- type: job
  name: combiner
  id: metadata_combiner
  nodeLabel: metadata_combiner
  arguments:
  - -files pegasus-data/metadata_client_3_round_0_input.yaml pegasus-data/metadata_eval_client_9_0_input.yaml
    pegasus-data/metadata_init_model_output.yaml pegasus-data/metadata_client_3_round_0_output.yaml
    pegasus-data/metadata_client_2_round_0_output.yaml pegasus-data/metadata_client_4_round_0_output.yaml
    pegasus-data/metadata_global_model_round_0_output.yaml pegasus-data/metadata_eval_client_9_0_output.yaml
    pegasus-data/metadata_eval_client_5_0_output.yaml pegasus-data/metadata_eval_client_6_0_output.yaml
    pegasus-data/metadata_perf_model_0_output.yaml pegasus-data/metadata_wf.yaml pegasus-data/metadata_transformations.yaml
    -output_file_name metadata -file_type yaml --use-git -token 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
    -owner swarmourr -repo autopush -branch main -pull
  uses:
  - lfn: pegasus-data/metadata_transformations.yaml
    type: input
  - lfn: pegasus-data/metadata_global_model_round_0_output.yaml
    type: input
  - lfn: pegasus-data/metadata_wf.yaml
    type: input
  - lfn: pegasus-data/metadata_eval_client_9_0_output.yaml
    type: input
  - lfn: pegasus-data/metadata_client_3_round_0_input.yaml
    type: input
  - lfn: pegasus-data/metadata_client_4_round_0_output.yaml
    type: input
  - lfn: pegasus-data/metadata_eval_client_5_0_output.yaml
    type: input
  - lfn: metadata.yaml
    type: output
    stageOut: true
    registerReplica: false
  - lfn: pegasus-data/metadata_perf_model_0_output.yaml
    type: input
  - lfn: pegasus-data/metadata_init_model_output.yaml
    type: input
  - lfn: pegasus-data/metadata_client_3_round_0_output.yaml
    type: input
  - lfn: metadata
    type: input
  - lfn: pegasus-data/metadata_eval_client_9_0_input.yaml
    type: input
  - lfn: pegasus-data/metadata_eval_client_6_0_output.yaml
    type: input
  - lfn: pegasus-data/metadata_client_2_round_0_output.yaml
    type: input
- type: job
  name: cp
  id: copy_file
  nodeLabel: copy_file
  arguments:
  - metadata.yaml
  - /home/poseidon/.pegasus/
  uses:
  - lfn: metadata.yaml
    type: input
  profiles:
    selector:
      execution.site: local
jobDependencies:
- id: client_3_round_0
  children:
  - global_model_round_0
  - tracker_data_job_client_3_round_0_output
  - tracker_data_job_client_3_round_0_input
- id: eval_client_9_0
  children:
  - tracker_data_job_eval_client_9_0_output
  - perf_model_0
  - tracker_data_job_eval_client_9_0_input
- id: init_model
  children:
  - client_2_round_0
  - client_4_round_0
  - client_3_round_0
  - tracker_data_job_init_model_output
- id: client_2_round_0
  children:
  - global_model_round_0
  - tracker_data_job_client_2_round_0_output
- id: client_4_round_0
  children:
  - global_model_round_0
  - tracker_data_job_client_4_round_0_output
- id: global_model_round_0
  children:
  - eval_client_6_0
  - eval_client_5_0
  - eval_client_9_0
  - tracker_data_job_global_model_round_0_output
- id: eval_client_5_0
  children:
  - tracker_data_job_eval_client_5_0_output
  - perf_model_0
- id: eval_client_6_0
  children:
  - tracker_data_job_eval_client_6_0_output
  - perf_model_0
- id: perf_model_0
  children:
  - tracker_data_job_perf_model_0_output
- id: tracker_data_job_client_3_round_0_input
  children:
  - metadata_combiner
- id: tracker_data_job_eval_client_9_0_input
  children:
  - metadata_combiner
- id: tracker_data_job_init_model_output
  children:
  - metadata_combiner
- id: tracker_data_job_client_3_round_0_output
  children:
  - metadata_combiner
- id: tracker_data_job_client_2_round_0_output
  children:
  - metadata_combiner
- id: tracker_data_job_client_4_round_0_output
  children:
  - metadata_combiner
- id: tracker_data_job_global_model_round_0_output
  children:
  - metadata_combiner
- id: tracker_data_job_eval_client_9_0_output
  children:
  - metadata_combiner
- id: tracker_data_job_eval_client_5_0_output
  children:
  - metadata_combiner
- id: tracker_data_job_eval_client_6_0_output
  children:
  - metadata_combiner
- id: tracker_data_job_perf_model_0_output
  children:
  - metadata_combiner
- id: tracker_wf_federated-learning-example-tracked-dated-fl1
  children:
  - metadata_combiner
- id: transformation_versioning_job
  children:
  - metadata_combiner
- id: metadata_combiner
  children:
  - copy_file
